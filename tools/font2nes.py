# NES Pattern Table Generator: Letters, Digits, and Some Symbols
# Each tile is 8x8, NES 2BPP format, unique for each char
# Output: alphabet.chr (tiles at ASCII code index)

# 8x8 bitmaps for A-Z, 0-9, and a few symbols (font8x8_basic style)
font8x8 = {
    'A': [0x18,0x24,0x42,0x7E,0x42,0x42,0x42,0x00],
    'B': [0x7C,0x42,0x42,0x7C,0x42,0x42,0x7C,0x00],
    'C': [0x3C,0x42,0x40,0x40,0x40,0x42,0x3C,0x00],
    'D': [0x78,0x44,0x42,0x42,0x42,0x44,0x78,0x00],
    'E': [0x7E,0x40,0x40,0x7C,0x40,0x40,0x7E,0x00],
    'F': [0x7E,0x40,0x40,0x7C,0x40,0x40,0x40,0x00],
    'G': [0x3C,0x42,0x40,0x4E,0x42,0x42,0x3C,0x00],
    'H': [0x42,0x42,0x42,0x7E,0x42,0x42,0x42,0x00],
    'I': [0x3C,0x18,0x18,0x18,0x18,0x18,0x3C,0x00],
    'J': [0x1E,0x08,0x08,0x08,0x08,0x48,0x30,0x00],
    'K': [0x42,0x44,0x48,0x70,0x48,0x44,0x42,0x00],
    'L': [0x40,0x40,0x40,0x40,0x40,0x40,0x7E,0x00],
    'M': [0x42,0x66,0x5A,0x5A,0x42,0x42,0x42,0x00],
    'N': [0x42,0x62,0x52,0x4A,0x46,0x42,0x42,0x00],
    'O': [0x3C,0x42,0x42,0x42,0x42,0x42,0x3C,0x00],
    'P': [0x7C,0x42,0x42,0x7C,0x40,0x40,0x40,0x00],
    'Q': [0x3C,0x42,0x42,0x42,0x4A,0x44,0x3A,0x00],
    'R': [0x7C,0x42,0x42,0x7C,0x48,0x44,0x42,0x00],
    'S': [0x3C,0x42,0x40,0x3C,0x02,0x42,0x3C,0x00],
    'T': [0x7E,0x18,0x18,0x18,0x18,0x18,0x18,0x00],
    'U': [0x42,0x42,0x42,0x42,0x42,0x42,0x3C,0x00],
    'V': [0x42,0x42,0x42,0x42,0x42,0x24,0x18,0x00],
    'W': [0x42,0x42,0x42,0x5A,0x5A,0x66,0x42,0x00],
    'X': [0x42,0x42,0x24,0x18,0x24,0x42,0x42,0x00],
    'Y': [0x42,0x42,0x24,0x18,0x18,0x18,0x18,0x00],
    'Z': [0x7E,0x02,0x04,0x18,0x20,0x40,0x7E,0x00],
    '0': [0x3C,0x42,0x46,0x4A,0x52,0x62,0x3C,0x00],
    '1': [0x18,0x38,0x18,0x18,0x18,0x18,0x3C,0x00],
    '2': [0x3C,0x42,0x02,0x0C,0x30,0x40,0x7E,0x00],
    '3': [0x3C,0x42,0x02,0x1C,0x02,0x42,0x3C,0x00],
    '4': [0x0C,0x14,0x24,0x44,0x7E,0x04,0x04,0x00],
    '5': [0x7E,0x40,0x7C,0x02,0x02,0x42,0x3C,0x00],
    '6': [0x1C,0x20,0x40,0x7C,0x42,0x42,0x3C,0x00],
    '7': [0x7E,0x02,0x04,0x08,0x10,0x10,0x10,0x00],
    '8': [0x3C,0x42,0x42,0x3C,0x42,0x42,0x3C,0x00],
    '9': [0x3C,0x42,0x42,0x3E,0x02,0x04,0x38,0x00],
    '!': [0x18,0x18,0x18,0x18,0x18,0x00,0x18,0x00],
    '?': [0x3C,0x42,0x02,0x0C,0x10,0x00,0x10,0x00],
    '.': [0x00,0x00,0x00,0x00,0x00,0x18,0x18,0x00],
    ',': [0x00,0x00,0x00,0x00,0x00,0x18,0x10,0x20],
    '-': [0x00,0x00,0x00,0x7E,0x00,0x00,0x00,0x00],
    '+': [0x00,0x18,0x18,0x7E,0x18,0x18,0x00,0x00],
    '=': [0x00,0x00,0x7E,0x00,0x7E,0x00,0x00,0x00],
    ' ': [0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00],
}

import struct

def make_nes_chr(chr_path):
    tile_size = 8
    ascii_start = 32
    ascii_end = 91  # 'Z'+1
    empty_tile = [0]*tile_size
    chr_data = bytearray()
    for code in range(ascii_start, ascii_end):
        char = chr(code)
        tile = font8x8.get(char, empty_tile)
        for plane in range(2):
            for y in range(8):
                byte = 0
                for x in range(8):
                    bit = (tile[y] >> (7-x)) & 1
                    if plane == 0:
                        byte |= (bit << (7-x))
                chr_data.append(byte)
    # Pad to 4096 bytes (single NES pattern table)
    if len(chr_data) < 4096:
        chr_data += bytes(4096 - len(chr_data))
    elif len(chr_data) > 4096:
        print(f"Warning: chr_data is larger than 4096 bytes ({len(chr_data)} bytes). File will not be padded.")
    with open(chr_path, 'wb') as f:
        f.write(chr_data)
    print(f"Wrote {len(chr_data)} bytes to {chr_path}")

if __name__ == "__main__":
    make_nes_chr("alphabet.chr")
